## `EventPlus` Runtime ##
**`EventPlus`** runtime deploys the code generated by the `EPCompiler`. `EventPlus` uses RMI for intercommunication among processes however can be extended to other communication protocols like JMS/HTTP.


### Discovery Manager ###
This process hosts all foundation services(i.e. identity generation,transaction token generation) also acts as the manager of all processing members in your application. All members register their service to this and this coordinates among. Handles member exit and entry into the system. This process starts rmi registry as specified by the `-Dep.registryPort=<yourport>` other wise default RMI port(1099) is used. If port 1099 is already taken by some other process you must specify the default. Once again this is not a mandatory process depending on your deployment. If you are running a standalone application instance not requiring to deploy across processes you do not need to start this explicitly.

**Can I customize underlying RMI Registry?** Absolutely any jvm flags you pass will be used as is with respect to RMI registry. You may like to use  this for dynamic class loading and tuning DGC.

### Application Member(s) ###
All your business logic runs here. Application will try to connect to discovery manager as specified by `-Dep.registryPort=<yourhost>`
`-Dep.registryPort=<yourport>` in absence of these arguments will try the default RMI port on the hardware its running. In case it does not discover the manager it starts in-process manager as specified by `-Dep.registryPort=<yourport>` and all other communication remains intact.

```
               -----------------------
               -----------------------

	@EPContainer(type=EPConType.ForkJoin,params="ep.slave.count=4")
	public interface InputOptions extends InputStocks{
		@EPAttribute(type=EPAttrType.Subscriber,depends="symbol",container="Reuters")
		public double stockPrice = 0.0;
		public String optionSymbol = symbol + "-March";
		@EPAttribute(type=EPAttrType.Subscriber,depends="optionSymbol",container="Reuters")
		public double optionPrice = 0.0;
		
		public String executingOnSlave=Deployer.getName();
	}
               -----------------------
               -----------------------
```

Application is started with jvm argument of `-Dep.deployment.desc` specifying the deployment descriptor. The descriptor is looked at working directory followed by class-path. Below is descriptor snippet corresponding to above `EPContainer` declaration. During deployment ep run-time creates container based on the specification below. Its possible to change the behavior of container by editing the xml how ever its advised not to do so you lose your changes upon re-compilation. If you see you have parameters like `ep.slave.count=4` is in the container declaration however you may not be knowing how much slave instances you may need up to the time of deployment. How do I handle these? Very easy replace them with xml entities. So you can replace  `params="ep.slave.count=4"` with `params="ep.slave.count=&slavecount;"` and then declare the variable in `ep.properties` in classpath. During deployment `<Param Name='ep.slave.count' Value='&slavecount;' />` will be resolved to its variable.

```
               -----------------------
               -----------------------

	<Container type='ForkJoin' name='InputOptions'>
		<Publish method='LOCAL' />
		<Listen container='InputStocks' context='ForkJoin' method='LOCAL'>
		</Listen>
		<Attribute className='epimpl.schema.ForkJoin$InputOptions$stockPrice' />
		<Listen container='Reuters' context='ForkJoin' method='LOCAL'>
		</Listen>
		<Feedback container='Reuters' context='ForkJoin' method='LOCAL' />
		<Subscribe container='Reuters' context='ForkJoin' method='LOCAL' depends='symbol' response='stockPrice'>
		</Subscribe>
		<Attribute className='epimpl.schema.ForkJoin$InputOptions$optionSymbol' />
		<Attribute className='epimpl.schema.ForkJoin$InputOptions$optionPrice' />
		<Subscribe container='Reuters' context='ForkJoin' method='LOCAL' depends='optionSymbol' response='optionPrice'>
		</Subscribe>
		<Attribute className='epimpl.schema.ForkJoin$InputOptions$executingOnSlave' />
		<Param Name='ep.slave.count' Value='4' />
	</Container>
               -----------------------
               -----------------------
```